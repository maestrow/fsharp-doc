= F# Cheat Sheet
:toc:
:toc-placement: preamble

Content

== let

*let* is used to bind a name to a value. 
Each binding has a type.
[source,fsharp]
let anInt = 10
let aFloat = 20.0
let aString = "I'm a string!"

=== mutable

[source,fsharp]
let mutable modifiable = "original value"
modifiable <- "new value"

== Functions

=== Type will be inferred
[source,fsharp]
let add x y =
    x + y
add 2 2

=== Specify type explicitly
[source,fsharp]
let toHackerTalk (phrase:string) : string =
    phrase.Replace('t', '7').Replace('o', '0')

=== Anonymous functioncs
[source,fsharp]
let twoTest test =
    test 2
twoTest (fun x -> x < 0)

=== Recursive
[source,fsharp]
let rec slowMultiply a b =
    if b > 1 then
        a + slowMultiply a (b - 1)
    else
        a
        
=== Tail recursion
[source,fsharp]
let slowMultiply a b =
  let rec loop acc counter =
    if counter > 1 then
      loop (acc + a) (counter - 1) (* tail recursive *)
    else
      acc
  loop a b

=== Currying and Partial Functions

[source,fsharp]
open System
let add x y = x + y
let addFive = add 5
Console.WriteLine(addFive 12) // prints 17

=== Chaining

[source,fsharp]
 [0..100]
|> List.filter (fun x -> x % 2 = 0)
|> List.map (fun x -> x * 2)
|> List.sum

=== Composition

How composition function declared
[source,fsharp]
let inline (<<) f g x = f (g x)
let inline (>>) f g x = g (f x)

Samples
[source,fsharp]
let square x = x*x
let half x = x/2
let inc x = x+1
4 |> (square >> half >> inc)  |> printfn "%9"

== Pattern matching

[source,fsharp]
match expr with
| pat1 -> 
| pat2 -> result12
| pat3 when expr3 -> result3
| _ -> defaultResult

=== Short functional syntax
[source,fsharp]
let rec factorial = function
    | 0 | 1 -> 1
    | n -> n * factorial (n - 1)

== Data Structures

=== Lists & Arrays
[source,fsharp]
let list1 = [2; 4; 6; 8]
let array1 = [|2;3|]
let array2 = [|1..10|]
array2.[2] (*element access*)


=== Sequences
Elements in the sequence are lazily evaluated, meaning that F# does not compute values in a sequence until the values are actually needed
The seq type is defined as follows:
[source,fsharp]
type seq<'a> = System.Collections.Generic.IEnumerable<'a>

[source,fsharp]
> let allEvens = 
    let rec loop x = seq { yield x; yield! loop (x + 2) }
    loop 0;;
> for a in (Seq.take 5 allEvens) do
    printfn "%i" a;;
0
2
4
6
8
val it : unit = ()

== Links

=== Resources
* http://www.tryfsharp.org/
* http://en.wikibooks.org/wiki/F_Sharp_Programming
* http://functional-programming.net/

=== Articles and questions
* http://stackoverflow.com/questions/2669299/when-do-you-put-double-semicolons-in-f
* http://blogs.msdn.com/b/chrsmith/archive/2008/06/14/function-composition.aspx Compare imperative programming, function chaining and function composition.
